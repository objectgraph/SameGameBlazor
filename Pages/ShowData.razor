@page "/showdata"
@inject DataStore DataStore
<button class="btn btn-outline-primary" @onclick="Refresh">Refresh</button>
<button class="btn btn-outline-primary" @onclick="Reset">Reset</button>

<table class="table">
    @foreach(var key in DataStore.Data.Keys){
        <tr>
        <td>@key</td>
        <td>@(DataStore.Data[key].Length)</td>
        </tr>
    }

</table>

@code{
    protected void Refresh(){
        StateHasChanged();
    }
    protected void Reset(){
        DataStore.Data = new ObservableConcurrentDictionary<string, Cell[,]>();
    }
    protected override void OnInitialized() {
        base.OnInitialized();
        Console.WriteLine("On Init");
        DataStore.Data.PropertyChanged+=(s,e)=>{
            Console.WriteLine("Property has changed");
            StateHasChanged();
        };
         DataStore.Data.CollectionChanged+=(s,e)=>{
            StateHasChanged();
            Console.WriteLine("Collection has changed");
        };
    }
}